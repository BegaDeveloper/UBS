<form [formGroup]="subForm" autocomplete="off" class="form-subs">
    <div class="back-div">
        <button type="button" class="back-btn d-flex" (mousedown)="$event.preventDefault()" (click)="backToLastPage()">
            <span class="material-symbols-outlined">arrow_back</span>
            <span>&nbsp;&nbsp;Nazad</span>
        </button>
    </div>
    <div class="id-div">
        <p>{{ title }}</p>
    </div>
    <div class="main-sub-div">
        <div class="subs">
            <table mat-table [dataSource]="subs" class="mat-elevation-z8">
                <div formArrayName="subscriptionRequestItems">
                    <div formGroupName="0">
                        <ng-container matColumnDef="element">
                            <th mat-header-cell *matHeaderCellDef>Ime</th>
                            <td mat-cell *matCellDef="let element; let i = index">
                                {{ element.refAction.name }}
                            </td>
                        </ng-container>

                        <ng-container matColumnDef="APP">
                            <th mat-header-cell *matHeaderCellDef>APP</th>
                            <td mat-cell *matCellDef="let APP; let i = index">
                                <mat-checkbox
                                    (change)="onChange($event, 'APP', APP.refAction.code)"
                                    class="box"
                                    color="primary"
                                    [checked]="APP.appNotification.subscribed"
                                    [value]="APP"
                                >
                                </mat-checkbox>
                            </td>
                        </ng-container>

                        <ng-container matColumnDef="EMAIL">
                            <th mat-header-cell *matHeaderCellDef>EMAIL</th>
                            <td mat-cell *matCellDef="let EMAIL; let i = index">
                                <mat-checkbox
                                    (change)="onChange($event, 'EMAIL', EMAIL.refAction.code)"
                                    class="box"
                                    color="primary"
                                    [checked]="EMAIL.emailNotification.subscribed"
                                    [value]="EMAIL"
                                >
                                </mat-checkbox>
                            </td>
                        </ng-container>
                    </div>
                </div>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
            </table>
        </div>
    </div>
</form>
